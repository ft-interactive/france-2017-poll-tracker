{% extends "layout.html" %}

{% block article_body %}

<section class="candidates">
  <h2 class="candidates--heading">The candidates</h2>

  <ul class="candidates--grid">
  {% set latestPoll = data.polls | sort(true, false, 'date') | first %}
  {% for candidate in data.candidates %}
    <li class="candidates--candidate candidates--candidate__{{candidate.key}}">
      <img class="candidates--profile-image" src="images/illustrations/{{candidate.key}}.png" />
      <div class="candidates--details">
        <h2 class="candidates--name">{{candidate.name.first}} {{candidate.name.last}}</h2>
        <h3 class="candidates--party-polling candidates--party-polling__mobile">
          TKTK
        </h3>
      </div>
    </li>
  {% endfor %}
  </ul>
</section>

<section class="polls-and-data">
  <h2 class="polls--heading">Current state of the polls</h2>
  <figure class="polls--current-state">
    <div data-polling-chart="{{data | dump}}"></div>
  </figure>

  <div class="polls-and-data--data-table o-expander" data-o-component="o-expander">
    <h2>The data</h2>
    <table class="polls-and-data--data-table o-expander__content">
      <thead>
        <tr>
          <td>Date</td>
          <td>Pollster</td>
          {% for candidate in data.candidates %}
          <td>{{ candidate.name.last }}</td>
          {% endfor %}
          <td>Sample*</td>
        </tr>
      </thead>
      <tbody>
        {% for poll in data.polls %}
        <tr>
          <td class="polls-and-data--table-cell__date">{{ poll.start | strftime('%b %-d') }}&ndash;{{ poll.end | strftime('%-d') }}</td>
          <td>{{ poll.pollster }}</td>
          {% for candidate in data.candidates %}
          <td>{{ (poll.result[candidate.key] | round(1)) + '%' if poll.result[candidate.key] else 'N/A' }}</td>
          {% endfor %}
          <td>{{ poll.sample }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <button class="o-expander__toggle">Show more polls</a>
  </div>

  <h2>Other scenarios...</h2>

  <h3 class="polls--heading">
    <span class="color--le-pen">Le Pen</span> vs <span class="color--macron">Macron</span>
  </h3>
  <figure class="polls--scenario-1"></figure>

  <h3 class="polls--heading">
    <span class="color--le-pen">Le Pen</span> vs <span class="color--fillon">Fillon</span>
  </h3>
  <figure class="polls--scenario-2"></figure>
</section>
{% endblock %}
